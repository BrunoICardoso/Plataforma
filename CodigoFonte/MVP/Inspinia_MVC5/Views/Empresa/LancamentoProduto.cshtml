@{
    ViewBag.Title = "Lançamento de produtos";
}

<style>

    .celltext {
        display: inline-block;
        text-overflow: ellipsis;
        width: 86%;
        /* word-wrap: break-word; */
        white-space: nowrap;
        overflow: hidden;
        padding-left: 4px;
    }

    .scroll {
        display: block;
        height: 107px;
        overflow-y: scroll;
    }

    #legendabubble {
        margin-bottom: 30px;
    }

    .bubble_tooltip {
        position: absolute;
        top: 300px;
        left: 130px;
        -moz-border-radius: 5px;
        border-radius: 5px;
        border: 2px solid #000;
        /* background: #222222; */
        background: #fff;
        /* color: #eeeeee; */
        color: black;
        padding: 10px;
        width: 300px;
        font-size: 12px;
        z-index: 10;
    }
</style>

<div class="row wrapper border-bottom white-bg page-heading">
    <div class="col-lg-10">
        <h2>Lançamento de produtos</h2>
        <ol class="breadcrumb">
            <li>
                <a href="index.html">Home</a>
            </li>
            <li>
                <a>Empresas</a>
            </li>
            <li>
                <a>Coca-Cola Company</a>
            </li>
            <li class="active">
                <strong>Lançamento de produtos</strong>
            </li>
        </ol>
    </div>
    <div class="col-lg-2">

    </div>
</div>
<div class="wrapper wrapper-content animated fadeInRight">


    <div class="row m-b-lg m-t-lg">
        <div class="col-md-6">

            <div class="profile-image">
                <img src="~/Images/Empresas/logo01.png" class="img-circle circle-border m-b-md" alt="profile">
            </div>
            <div class="profile-info">
                <div class="">
                    <div>
                        <h2 class="no-margins">
                            Coca Cola Company
                        </h2>
                        <h4>Corporação</h4>
                        <small>
                            The Coca-Cola Company, geralmente referida como Coca-Cola Company, Coke ou simplesmente Coca-Cola, dependendo da região, é uma corporação multinacional estadunidense, fabricante e comerciante de bebidas não-alcoólicas e concentrados de xaropes.
                        </small>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-md-6">

        </div>


    </div>
    <div class="row">

        <div class="col-lg-3">
            <div class="ibox float-e-margins">
                <div class="ibox-title">
                    <h5>Agrupamento dos dados</h5>
                </div>
                <div class="ibox-content" style="height:170px">
                    <h5>
                        Agrupar por:
                    </h5>
                    <div>
                        <select id='group-everything-by' class="form-control m-b">
                            <option value=''></option>
                        </select>
                    </div>
                    <h5>
                        Colorir por:
                    </h5>
                    <div>
                        <select id='color-everything-by' class="form-control m-b">
                            <option value=''></option>
                        </select>
                    </div>

                </div>
            </div>
        </div>
        <div class="col-lg-9">
            <div class="ibox float-e-margins">
                <div class="ibox-title">
                    <h5>Filtros</h5>
                </div>
                <div class="ibox-content" style="min-height:170px">
                    <div class="row" id="filter-list">
                    </div>


                </div>
            </div>
        </div>
        <div class="col-lg-12">
            <div id='vis'>
            </div>
            <div class="row">
                <div class="col-lg-12" id="legendabubble"></div>
            </div>
        </div>


        <div class="col-lg-12">
            <div class="tabs-container">
                <ul class="nav nav-tabs">
                    <li class="active"><a data-toggle="tab" href="#tab-1">MAPA</a></li>
                    <li class=""><a data-toggle="tab" href="#tab-2">INPI</a></li>
                </ul>
                <div class="tab-content">
                    <div id="tab-1" class="tab-pane active">
                        <div class="panel-body">
                            <strong>Lista dos últimos registros da Coca Cola Company no Ministério da Agricultura</strong>
                            <div class="table-responsive">
                                <table class="table table-striped">
                                    <thead>
                                        <tr>
                                            <th>Marca</th>
                                            <th>Produto</th>
                                            <th>Macro categoria</th>
                                            <th>Categoria</th>
                                            <th>Sabor</th>
                                            <th>Data do registro</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td>Bavaria</td>
                                            <td>Cerveja Leve Pilsen</td>
                                            <td>Fermentado Alcoolico</td>
                                            <td>Cerveja</td>
                                            <td>Pilsen</td>
                                            <td>03/06/2016</td>
                                        </tr>
                                        <tr>
                                            <td>Bavaria</td>
                                            <td>Cerveja Leve Pilsen</td>
                                            <td>Fermentado Alcoolico</td>
                                            <td>Cerveja</td>
                                            <td>Pilsen</td>
                                            <td>03/06/2016</td>
                                        </tr>
                                        <tr>
                                            <td>Bavaria</td>
                                            <td>Cerveja Leve Pilsen</td>
                                            <td>Fermentado Alcoolico</td>
                                            <td>Cerveja</td>
                                            <td>Pilsen</td>
                                            <td>03/06/2016</td>
                                        </tr>
                                        <tr>
                                            <td>Bavaria</td>
                                            <td>Cerveja Leve Pilsen</td>
                                            <td>Fermentado Alcoolico</td>
                                            <td>Cerveja</td>
                                            <td>Pilsen</td>
                                            <td>03/06/2016</td>
                                        </tr>
                                        <tr>
                                            <td>Bavaria</td>
                                            <td>Cerveja Leve Pilsen</td>
                                            <td>Fermentado Alcoolico</td>
                                            <td>Cerveja</td>
                                            <td>Pilsen</td>
                                            <td>03/06/2016</td>
                                        </tr>
                                        <tr>
                                            <td>Bavaria</td>
                                            <td>Cerveja Leve Pilsen</td>
                                            <td>Fermentado Alcoolico</td>
                                            <td>Cerveja</td>
                                            <td>Pilsen</td>
                                            <td>03/06/2016</td>
                                        </tr>
                                        <tr>
                                            <td>Bavaria</td>
                                            <td>Cerveja Leve Pilsen</td>
                                            <td>Fermentado Alcoolico</td>
                                            <td>Cerveja</td>
                                            <td>Pilsen</td>
                                            <td>03/06/2016</td>
                                        </tr>
                                        <tr>
                                            <td>Bavaria</td>
                                            <td>Cerveja Leve Pilsen</td>
                                            <td>Fermentado Alcoolico</td>
                                            <td>Cerveja</td>
                                            <td>Pilsen</td>
                                            <td>03/06/2016</td>
                                        </tr>
                                        <tr>
                                            <td>Bavaria</td>
                                            <td>Cerveja Leve Pilsen</td>
                                            <td>Fermentado Alcoolico</td>
                                            <td>Cerveja</td>
                                            <td>Pilsen</td>
                                            <td>03/06/2016</td>
                                        </tr>
                                        <tr>
                                            <td>Bavaria</td>
                                            <td>Cerveja Leve Pilsen</td>
                                            <td>Fermentado Alcoolico</td>
                                            <td>Cerveja</td>
                                            <td>Pilsen</td>
                                            <td>03/06/2016</td>
                                        </tr>

                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                    <div id="tab-2" class="tab-pane">
                        <div class="panel-body">
                            <strong>Lista dos últimos registros da Coca Cola Company no Instituto Nacional da Propriedade Industrial</strong>

                            <div class="table-responsive">
                                <table class="table table-striped">
                                    <thead>
                                        <tr>
                                            <th>Marca</th>
                                            <th>Natureza</th>
                                            <th>Classe NICE</th>
                                            <th>Apresentação</th>
                                            <th>Situação</th>
                                            <th>Data do depósito</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td>MINI RETORNÁVEIS</td>
                                            <td>De Produto</td>
                                            <td>NCL(10) 32</td>
                                            <td>Mista</td>
                                            <td>Aguardando exame de mérito</td>
                                            <td>24/03/2016</td>
                                        </tr>
                                        <tr>
                                            <td>MINI RETORNÁVEIS</td>
                                            <td>De Produto</td>
                                            <td>NCL(10) 32</td>
                                            <td>Mista</td>
                                            <td>Aguardando exame de mérito</td>
                                            <td>24/03/2016</td>
                                        </tr>
                                        <tr>
                                            <td>MINI RETORNÁVEIS</td>
                                            <td>De Produto</td>
                                            <td>NCL(10) 32</td>
                                            <td>Mista</td>
                                            <td>Aguardando exame de mérito</td>
                                            <td>24/03/2016</td>
                                        </tr>
                                        <tr>
                                            <td>MINI RETORNÁVEIS</td>
                                            <td>De Produto</td>
                                            <td>NCL(10) 32</td>
                                            <td>Mista</td>
                                            <td>Aguardando exame de mérito</td>
                                            <td>24/03/2016</td>
                                        </tr>
                                        <tr>
                                            <td>MINI RETORNÁVEIS</td>
                                            <td>De Produto</td>
                                            <td>NCL(10) 32</td>
                                            <td>Mista</td>
                                            <td>Aguardando exame de mérito</td>
                                            <td>24/03/2016</td>
                                        </tr>
                                        <tr>
                                            <td>MINI RETORNÁVEIS</td>
                                            <td>De Produto</td>
                                            <td>NCL(10) 32</td>
                                            <td>Mista</td>
                                            <td>Aguardando exame de mérito</td>
                                            <td>24/03/2016</td>
                                        </tr>
                                        <tr>
                                            <td>MINI RETORNÁVEIS</td>
                                            <td>De Produto</td>
                                            <td>NCL(10) 32</td>
                                            <td>Mista</td>
                                            <td>Aguardando exame de mérito</td>
                                            <td>24/03/2016</td>
                                        </tr>
                                        <tr>
                                            <td>MINI RETORNÁVEIS</td>
                                            <td>De Produto</td>
                                            <td>NCL(10) 32</td>
                                            <td>Mista</td>
                                            <td>Aguardando exame de mérito</td>
                                            <td>24/03/2016</td>
                                        </tr>
                                        <tr>
                                            <td>MINI RETORNÁVEIS</td>
                                            <td>De Produto</td>
                                            <td>NCL(10) 32</td>
                                            <td>Mista</td>
                                            <td>Aguardando exame de mérito</td>
                                            <td>24/03/2016</td>
                                        </tr>
                                        <tr>
                                            <td>MINI RETORNÁVEIS</td>
                                            <td>De Produto</td>
                                            <td>NCL(10) 32</td>
                                            <td>Mista</td>
                                            <td>Aguardando exame de mérito</td>
                                            <td>24/03/2016</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>


            </div>
        </div>

    </div>
</div>


    @section Scripts {


        @Scripts.Render("~/vis")
        <script src="~/Scripts/vis_files/vis_empresa.js" type="text/javascript"></script>

        <script type="text/javascript">

            $(function () {
                var controlsVisible = true;
                $('#left-sidebar-toggle').click(function () {
                    controlsVisible = !controlsVisible;
                    if (controlsVisible)
                        $('#left-sidebar-container').slideDown('fast');
                    else
                        $('#left-sidebar-container').slideUp('fast');
                });
            });
            $(function () {
                var controlsVisible = true;
                $('#right-sidebar-toggle').click(function () {
                    controlsVisible = !controlsVisible;
                    if (controlsVisible)
                        $('#right-sidebar-container').slideDown('fast');
                    else
                        $('#right-sidebar-container').slideUp('fast');
                });
            });
            var initialise_form = function (selectionOptions) {

                var GetDiscreteFilters = function () {
                    var filters = [];
                    $('.filter_block').each(function (index, element) {
                        var target = $(this).attr('data-target');
                        var removeValues = {};
                        $(this).find('input:not(:checked)').each(function (innerIndex, innerElement) {
                            removeValues[$(this).val()] = true;
                        });
                        var toAdd = {
                            target: target,
                            removeValues: removeValues
                        };
                        filters.push(toAdd);
                    });
                    return filters;
                };
                var ResetFilters = function () {
                    var filters = {
                        discrete: GetDiscreteFilters(),
                        numeric: [] // numeric not done yet!
                    };
                    console.log(filters);
                    use_filters(filters);
                };

                var groupSelect = $('#group-everything-by');
                for (var opt in selectionOptions) {
                    var lookup = selectionOptions[opt];
                    if(lookup.key != "Filtro:Marca"){
                        groupSelect.append('<option value="' + lookup.key + '">' + lookup.title + '</option>');
                    }
                }
                var ResetGrouping = function () {
                    var groupBy = groupSelect.val();
                    console.log(groupBy);
                    group_by(groupBy);
                };

                groupSelect.change(ResetGrouping);

                var colorSelect = $('#color-everything-by');
                for (var opt in selectionOptions) {
                    var lookup = selectionOptions[opt];
                    colorSelect.append('<option value="' + lookup.key + '">' + lookup.title + '</option>');
                }
                var ResetColors = function () {
                    var colorBy = colorSelect.val();
                    console.log(colorBy);
                    color_by(colorBy);
                };

                $('#clear_filters').click(function () {
                    $('.filter_block input').attr('checked', 'checked');
                    ResetFilters();
                });
                colorSelect.change(ResetColors);

                $('.filter_block input').change(function () { ResetFilters(); });

                $('#left-sidebar').fadeIn(2000);
            };

            function get_distinct_values(csv, keyType, key) {
                var allValues = {};
                for (var i in csv) {
                    var value = csv[i][key];
                    allValues[value] = true;
                }

                var allValuesArray = [];
                for (var i in allValues)
                    allValuesArray.push(i);

                allValuesArray.sort();

                return allValuesArray
            }

            function keyToLookup(key) {
                var firstPartEnds = key.indexOf(':');
                if (firstPartEnds <= 0)
                    return { key: key, type: key, title: key };

                var firstPart = key.substring(0, firstPartEnds);
                var secondPart = key.substring(firstPartEnds + 1);

                return { key: key, type: firstPart, title: secondPart };
            }
            function render_filters_colors_and_groups(csv) {
                var first = csv[0];
                var lookups = [];
                for (var key in first) {
                    var lookup = keyToLookup(key);
                    switch (lookup.type) {
                        case "Filtro":
                            lookups.push(lookup);
                            break;
                        default:
                            break;
                    }
                }

                var filterList = $('#filter-list');
                for (var i in lookups) {
                    var lookup = lookups[i];
                    var values = get_distinct_values(csv, lookup.type, lookup.key);
                    var item = $('<div class="filter_block " data-target="' + lookup.key + '"><h5 class="filter_title">' + lookup.title + '</h5></div>');
                    var containerchecks = $('<div class="scroll"></div>');
                    for (var j in values) {
                        var checkbox = $('<div class="sub-filter-block"><input type="checkbox" checked="checked" value="' + values[j] + '"/> ' + values[j] + '</div>');
                        checkbox.appendTo(containerchecks);
                    }

                    containerchecks.appendTo(item);

                    var containeritem = $('<div class="col-md-3"></div>');
                    containeritem.appendTo(filterList);



                    item.appendTo(containeritem);
                }

                initialise_form(lookups);
            }

            function hide_color_chart() {
                var right = $('#right-sidebar');
                var rightContainer = $('#right-sidebar-container');
                right.fadeOut(500, function () {
                    rightContainer.empty();
                });
            }
            function show_color_chart(what_to_color_by, color_mapper) {
                //var right = $('#right-sidebar');
                rightContainer = $('#legendabubble');
                //rightContainer.fadeOut(500, function () {
                rightContainer.empty();

                var lookup = keyToLookup(what_to_color_by);
                $('<h3>Legenda</h3>').appendTo(rightContainer);

                var table = $('<div class="table" />');
                for (var key in color_mapper) {
                    var row = $('<div class="itemlegenda col-md-2"/>');

                    var cell = $('<div class="cell"/>');
                    var square = $('<div style="display: inline-block; width: 15px; height: 15px; background: ' + color_mapper[key] + ';">&nbsp;</div>');
                    square.appendTo(cell);
                    cell.appendTo(row);

                    var celltext = $('<div class="celltext"/>');
                    celltext.text(' ' + key + ' ');
                    cell.append(celltext);
                    row.appendTo(table);
                }

                table.appendTo(rightContainer);
                //right.fadeIn(500);
                //});
            }

            $(document).ready(function () {




            });
        </script>
    }

